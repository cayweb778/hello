# 租户设计
- 以下解决方案，
  - 其他开发者不产生影响
  - 复制账套逻辑，调整为追加账套数据逻辑 
  - 用户控制表行级权限
  - 是之前的租户重构设计中，最轻松的，只需调整模板写入的方式 “由复制表改为追加数据”
  - 侵入性低，从数据结构上所有tenentId字段默认值取当前postgre用户名，从语法上，几行语法可以搞定租户模式
- 切换数据源的方式不变，只不过切换schemaName改成切换user
- NC中，租户即客户账套
- 方案：租户单数据库 + 分布式分区表
- 
### 解决
 - 解决无限数据（无上限的租户,无上限的特定表数据）引发的问题
 - 取消多数据源，使用单数据库，可以降低很多工作量（开发、运维、备份问题）
 - 单表性能问题，更轻松的性能调优（比如分区表，可以完全控制性能）
 - 更低的耦合性
 - 数据一致性
 - 冗余性
 - 多数据库的迭代维护成本
 - 运维的逻辑性
 - 开发过程的逻辑性

### 特性
- 运维人员，登陆不同租户，查看所有行数据或插入或导出
- 审计：
    - 方案1：手动登陆 租户（用户）的数据库账号, 
    - 方案2：程序控制批量租户审计

### 租户解决方案
1. 创建客户（租户）时
    - sql: 创建一个租户用户即可


