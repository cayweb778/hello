<html>
<head>
    <meta charset="utf-8"/>
</head>
<body>
<div id="boozsoftNet">
    <div id="hello" style="position:relative;z-index:1;background:white">
        <div v-show="showThis" v-if="showBoozsoft"
             style="position:fixed;top:0;left:0;width:100%;height:100%;background:white;">


            <div style="    --tw-gradient-from: #ecfdf5;
        width:100%;height:100%;top: 0;
    position: absolute;
    --tw-gradient-stops: var(--tw-gradient-from),var(--tw-gradient-to,rgba(236,253,245,0));
    background-image: linear-gradient(to right,var(--tw-gradient-stops));">
                <div style="color:rebeccapurple;width:200px;height:50px;border:1px solid #d0d0d0;padding-top:15px;padding-left:15px;    box-shadow: 1px 2px 9px #9e9e9e;border-radius:20px;margin:calc( (100vh - 50px) / 2 - 5vh ) auto 0;">
                    <span v-text="msg"></span><span v-text="d1"></span>
                </div>
            </div>
        </div>
        <div style="position:relative;z-index:1;background:white">
            <div v-show="showPanpel" style="position:fixed;width:100%;height:100%">

                <div style="width:500px;text-align:center;height:300px;margin:calc((100vh - 300px) / 2 - 6vh ) auto 0;border: solid 1px black;box-shadow: 0 0 black;border-radius: 10px;font-size: 13px;line-height: 2;letter-spacing: 0.6em;font-weight: 900;font-style: normal;">
                    财税达NC网关API<br>
                    <div style="margin-top:50px">未绑定用户</div>
                    <br>
                    账号：<input/><br>
                    密码：<input/><br>
                    <div style="margin-top:20px">
                        <button>绑定已有用户</button>
                        <button>新增匿名用户</button>
                    </div>
                </div>


                <div style="background:gray;width:500px;text-align:center;height:300px;position:absolute;top:calc((100vh - 300px) / 2 - 6vh);left:calc((100vw - 500px) / 2); border: solid 1px black;box-shadow: 0 0 black;border-radius: 10px;font-size: 13px;line-height: 2;letter-spacing: 0.6em;font-weight: 900;font-style: normal;">
                    <div style="margin-top:140px">
                        账号或密码不正确，无法绑定
                    </div>
                </div>


            </div>
        </div>
    </div>
</div>
<script type="module">
    import {NcLogin} from './aa.js'


    const host = 'http://nc.boozsoft.cn:81/nc'
    const apiList = {
        async findUserByOpenId(openId) {
            return {
                status: 500,
            }
        },
        async findUserByUsernameAndPassword(openId) {
            return {
                status: 500,
            }
        },
        async loginUser() {

        },
        async bindUser() {

        }
    }


    NcLogin(host,( {state,actions}) => {
            // state.openId
            // sendMsg, goBindUser
            return {
                bindUserFun: async ({username, password}) => {
                    const result = await apiList.findUserByUsernameAndPassword({username, password})
                    if (result == 500) {
                        sendMsg({
                            type: 'error',
                            msg: '账号或密码不正确，无法绑定'
                        })
                    }
                    // sendMsg({
                    //     type:'success',
                    //     msg:'新增成功，准备跳转'
                    // })
                },
                newUserFun: async ({username, password}) => {
                    const result = await apiList.findUserByUsernameAndPassword({username, password})
                    if (result == 500) {
                        sendMsg({
                            type: 'error',
                            msg: '账号或密码不正确，无法绑定'
                        })
                    }
                    // sendMsg({
                    //     type:'success',
                    //     msg:'新增成功，准备跳转'
                    // })
                }
            }
        })


    // async ({openId}, {sendMsg, goBindUser}) => {
    //
    //     const result = await apiList.findUserByOpenId(openId)
    //     if (result.status == 500) {
    //         // 没有用户，去绑定或者新增
    //         goBindUser()
    //     } else {
    //
    //     }
    //
    //
    //     // const [user, password] = openId.split(',')
    //     console.log(openId)
    //     // this.loginForm.username = user
    //     // this.loginForm.password = password
    //     // this.handleLogin()
    //     // $("input[name='username']").val(user)
    //     // $("input[name='password']").val(password)
    //     // boozlogin.loginBtnOnclick()
    // }
</script>
</body>
</html>